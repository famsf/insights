@mixin scrollComparisonTransition {
  opacity: 0;
  transition-property: opacity;
  transition-duration: 0.475s;
  transition-timing-function: ease-out;
}

%scroll-comparison {
  $transitionDuration: 0.325s;
  .picture-with-caption {
    position: relative;
  }
  .cell {

    width: calc(25% - 1.875rem);
    transition-property: width;
    transition-duration: $transitionDuration;
    transition-timing-function: ease-out;
    position: relative;
    .picture {
      position: relative;
      z-index: 5;
    }
    .caption {
      position: absolute;
      top: calc(41.66667% - 1.875rem);
      @include scrollComparisonTransition;
      transition-delay: $transitionDuration;
      transition-duration: $transitionDuration * 0.8;
      opacity: 0;
      z-index: 2;
    }
    h3 {
      position: absolute;
      font-family: $alternate-header-font-family;
      transition-duration: $transitionDuration;
      top: calc(25% - 1.875rem);
    }
    .textarea {
      position: absolute;
      margin-top: 0.5rem;
      opacity: 0;
      width: calc(41.66667% - 1.875rem);
      @include scrollComparisonTransition;
      transition-delay: $transitionDuration;
      transition-duration: $transitionDuration * 0.8;

    }
  }
  .cell.active {

    width: calc(41.66667% - 1.875rem);

    .picture {
      /*
       we may have to have to cater it to different breakpoints
       somewhat specifically,
       sadly animations dont resolve well when
       transforming max-height to 100% or auto
      */
      transition-delay: $transitionDuration;

      @include breakpoint(medium) {
        max-height: 550px;
        width: 100%;
      }

    }
    .textarea,
    .caption {
      opacity: 1;
    }
    .text-area {
      transition-delay: 0;
      top: calc(41.66667vw - 1.875rem);

    }
    .caption {
      max-height: 5rem;
      top: 29vw;
    }
    h3 {
      top: 35vw;
    }
  }
  .picture {
    overflow: hidden;
  }

}

.scroll-comparison {
  @extend %scroll-comparison;
}
